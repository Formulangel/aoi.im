(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{3:function(e,gr,mr){"use strict";(function(r,t){mr.d(gr,"a",function(){return Re}),mr.d(gr,"b",function(){return vr});var s,c=mr(8),n="warn";(k=s=s||{}).afterCreate="afterCreate",k.afterAttach="afterAttach",k.afterCreationFinalization="afterCreationFinalization",k.beforeDetach="beforeDetach",k.beforeDestroy="beforeDestroy";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function e(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var b=function(){return(b=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t,r,n){var i,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;0<=l;l--)(i=e[l])&&(o=(a<3?i(o):3<a?i(t,r,o):i(t,r))||o);return 3<a&&o&&Object.defineProperty(t,r,o),o}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o}function f(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}function o(e){return oe(e,1),le(e).type}function l(e,t){oe(e,1),De(),le(e).applyPatches(me(t))}function h(e,t){void 0===t&&(t=!0),oe(e,1);e=le(e);return t?e.snapshot:je(e.type.getSnapshot(e,!1))}var d=(Object.defineProperty(y.prototype,"subpath",{get:function(){return this._subpath},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"subpathUponDeath",{get:function(){return this._subpathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"pathUponDeath",{get:function(){return this._pathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"value",{get:function(){return this.type.getValue(this)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"state",{get:function(){return this._state},set:function(e){var t=this.isAlive;this._state=e;e=this.isAlive;this.aliveAtom&&t!==e&&this.aliveAtom.reportChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"fireInternalHook",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._hookSubscribers&&this._hookSubscribers.emit(e,this,e)}}),Object.defineProperty(y.prototype,"registerHook",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._hookSubscribers||(this._hookSubscribers=new Ie),this._hookSubscribers.register(e,t)}}),Object.defineProperty(y.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"baseSetParent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._parent=e,this._subpath=t,this._escapedSubpath=void 0,this.pathAtom&&this.pathAtom.reportChanged()}}),Object.defineProperty(y.prototype,"path",{get:function(){return this.getEscapedPath(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"getEscapedPath",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e&&(this.pathAtom||(this.pathAtom=Object(c.l)("path")),this.pathAtom.reportObserved()),this.parent?(void 0===this._escapedSubpath&&(this._escapedSubpath=this._subpath?He(this._subpath):""),this.parent.getEscapedPath(e)+"/"+this._escapedSubpath):""}}),Object.defineProperty(y.prototype,"isRoot",{get:function(){return null===this.parent},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"isAlive",{get:function(){return this.state!==X.DEAD},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"isDetaching",{get:function(){return this.state===X.DETACHING},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"observableIsAlive",{get:function(){return this.aliveAtom||(this.aliveAtom=Object(c.l)("alive")),this.aliveAtom.reportObserved(),this.isAlive},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"baseFinalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(0,this.state===X.CREATED){if(this.parent){if(this.parent.state!==X.FINALIZED)return;this.fireHook(s.afterAttach)}this.state=X.FINALIZED,e&&e()}}}),Object.defineProperty(y.prototype,"baseFinalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._hookSubscribers&&this._hookSubscribers.clearAll(),this._subpathUponDeath=this._subpath,this._pathUponDeath=this.getEscapedPath(!1),this.baseSetParent(null,""),this.state=X.DEAD}}),Object.defineProperty(y.prototype,"baseAboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.fireHook(s.beforeDestroy)}}),y);function y(e,t,r,n){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"environment",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_escapedSubpath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_subpath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_subpathUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pathUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"storedValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"aliveAtom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_state",{enumerable:!0,configurable:!0,writable:!0,value:X.INITIALIZING}),Object.defineProperty(this,"_hookSubscribers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pathAtom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.environment=n,this.baseSetParent(t,r)}var v,g=(e(m,v=d),Object.defineProperty(m.prototype,"root",{get:function(){if(!this.parent)throw de("This scalar node is not part of a tree");return this.parent.root},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"setParent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.parent!==e,e=this.subpath!==t;(r||e)&&(this.environment=void 0,this.baseSetParent(this.parent,t))}}),Object.defineProperty(m.prototype,"snapshot",{get:function(){return je(this.getSnapshot())},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type.getSnapshot(this)}}),Object.defineProperty(m.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=(this.isAlive?this.path:this.pathUponDeath)||"<root>";return this.type.name+"@"+e+(this.isAlive?"":" [dead]")}}),Object.defineProperty(m.prototype,"die",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isAlive&&this.state!==X.DETACHING&&(this.aboutToDie(),this.finalizeDeath())}}),Object.defineProperty(m.prototype,"finalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseFinalizeCreation()}}),Object.defineProperty(m.prototype,"aboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseAboutToDie()}}),Object.defineProperty(m.prototype,"finalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseFinalizeDeath()}}),Object.defineProperty(m.prototype,"fireHook",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.fireInternalHook(e)}}),a([c.j],m.prototype,"die",null),m);function m(e,t,r,n,i){var a=v.call(this,e,t,r,n)||this;Object(c.v)(a);try{a.storedValue=e.createNewInstance(i)}catch(e){throw a.state=X.DEAD,e}return a.state=X.CREATED,a.finalizeCreation(),a}var w,P,O=1,j={onError:function(e){throw e}},_=(e(S,w=d),Object.defineProperty(S.prototype,"applyPatches",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.createObservableInstanceIfNeeded(),this._applyPatches(e)}}),Object.defineProperty(S.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.createObservableInstanceIfNeeded(),this._applySnapshot(e)}}),Object.defineProperty(S.prototype,"createObservableInstanceIfNeeded",{enumerable:!1,configurable:!0,writable:!0,value:function(){0===this._observableInstanceState&&this.createObservableInstance()}}),Object.defineProperty(S.prototype,"createObservableInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t,e;this._observableInstanceState=1;for(var r=[],n=this.parent;n&&0===n._observableInstanceState;)r.unshift(n),n=n.parent;try{for(var i=p(r),a=i.next();!a.done;a=i.next())a.value.createObservableInstanceIfNeeded()}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}var o,l,u=this.type;try{this.storedValue=u.createNewInstance(this._childNodes),this.preboot(),this._isRunningAction=!0,u.finalizeNewInstance(this,this.storedValue)}catch(e){throw this.state=X.DEAD,e}finally{this._isRunningAction=!1}this._observableInstanceState=2,o=this,l="snapshot",Object(c.n)(o,l).trackAndCompute(),this.isRoot&&this._addSnapshotReaction(),this._childNodes=fe,this.state=X.CREATED,this.fireHook(s.afterCreate),this.finalizeCreation()}}),Object.defineProperty(S.prototype,"root",{get:function(){var e=this.parent;return e?e.root:this},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"clearParent",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.parent){this.fireHook(s.beforeDetach);var e=this.state;this.state=X.DETACHING;var t=this.root,r=t.environment,n=t.identifierCache.splitCache(this);try{this.parent.removeChild(this.subpath),this.baseSetParent(null,""),this.environment=r,this.identifierCache=n}finally{this.state=e}}}}),Object.defineProperty(S.prototype,"setParent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e!==this.parent,n=t!==this.subpath;(r||n)&&(r?(this.environment=void 0,e.root.identifierCache.mergeCache(this),this.baseSetParent(e,t),this.fireHook(s.afterAttach)):n&&this.baseSetParent(this.parent,t))}}),Object.defineProperty(S.prototype,"fireHook",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this.fireInternalHook(e);var r=this.storedValue&&"object"==typeof this.storedValue&&this.storedValue[e];"function"==typeof r&&(c.e?Object(c.e)(function(){r.apply(t.storedValue)}):r.apply(this.storedValue))}}),Object.defineProperty(S.prototype,"snapshot",{get:function(){return je(this.getSnapshot())},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.isAlive?2===this._observableInstanceState?this._getActualSnapshot():this._getCachedInitialSnapshot():this._snapshotUponDeath}}),Object.defineProperty(S.prototype,"_getActualSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type.getSnapshot(this)}}),Object.defineProperty(S.prototype,"_getCachedInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,r;return this._cachedInitialSnapshotCreated||(e=this.type,t=this._childNodes,r=this._initialSnapshot,this._cachedInitialSnapshot=e.processInitialSnapshot(t,r),this._cachedInitialSnapshotCreated=!0),this._cachedInitialSnapshot}}),Object.defineProperty(S.prototype,"isRunningAction",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!!this._isRunningAction||!this.isRoot&&this.parent.isRunningAction()}}),Object.defineProperty(S.prototype,"assertAlive",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=n;if(!this.isAlive&&"ignore"!==t){var r=this._getAssertAliveError(e);switch(t){case"error":throw de(r);case"warn":Ne(r)}}}}),Object.defineProperty(S.prototype,"_getAssertAliveError",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.getEscapedPath(!1)||this.pathUponDeath||"",r=e.subpath&&He(e.subpath)||"",n=e.actionContext||M;n&&"action"!==n.type&&n.parentActionEvent&&(n=n.parentActionEvent);var i="";return n&&null!=n.name&&(i=(n&&n.context&&(oe(e=n.context,1),le(e).path)||t)+"."+n.name+"()"),"You are trying to read or write to an object that is no longer part of a state tree. (Object type: '"+this.type.name+"', Path upon death: '"+t+"', Subpath: '"+r+"', Action: '"+i+"'). Either detach nodes first, or don't use objects after removing / replacing them in the tree."}}),Object.defineProperty(S.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.assertAlive({subpath:e}),this._autoUnbox=!1;try{return 2===this._observableInstanceState?this.type.getChildNode(this,e):this._childNodes[e]}finally{this._autoUnbox=!0}}}),Object.defineProperty(S.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertAlive(fe),this._autoUnbox=!1;try{return 2===this._observableInstanceState?this.type.getChildren(this):pe(this._childNodes)}finally{this._autoUnbox=!0}}}),Object.defineProperty(S.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.type.getChildType(e)}}),Object.defineProperty(S.prototype,"isProtected",{get:function(){return this.root.isProtectionEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"assertWritable",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.assertAlive(e),!this.isRunningAction()&&this.isProtected)throw de("Cannot modify '"+this+"', the object is protected and can only be modified by using an action.")}}),Object.defineProperty(S.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.type.removeChild(this,e)}}),Object.defineProperty(S.prototype,"unbox",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e&&(this.assertAlive({subpath:e.subpath||e.subpathUponDeath}),this._autoUnbox?e.value:e)}}),Object.defineProperty(S.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=(this.isAlive?this.path:this.pathUponDeath)||"<root>",t=this.identifier?"(id: "+this.identifier+")":"";return this.type.name+"@"+e+t+(this.isAlive?"":" [dead]")}}),Object.defineProperty(S.prototype,"finalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var i=this;this.baseFinalizeCreation(function(){var t,e;try{for(var r=p(i.getChildren()),n=r.next();!n.done;n=r.next())n.value.finalizeCreation()}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}i.fireInternalHook(s.afterCreationFinalization)})}}),Object.defineProperty(S.prototype,"detach",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.isAlive)throw de("Error while detaching, node is not alive.");this.clearParent()}}),Object.defineProperty(S.prototype,"preboot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var r=this;this._applyPatches=$(this.storedValue,"@APPLY_PATCHES",function(e){e.forEach(function(e){var t=Ue(e.path);ce(r,t.slice(0,-1)).applyPatchLocally(t[t.length-1],e)})}),this._applySnapshot=$(this.storedValue,"@APPLY_SNAPSHOT",function(e){if(e!==r.snapshot)return r.type.applySnapshot(r,e)}),_e(this.storedValue,"$treenode",this),_e(this.storedValue,"toJSON",se)}}),Object.defineProperty(S.prototype,"die",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isAlive&&this.state!==X.DETACHING&&(this.aboutToDie(),this.finalizeDeath())}}),Object.defineProperty(S.prototype,"aboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){0!==this._observableInstanceState&&(this.getChildren().forEach(function(e){e.aboutToDie()}),this.baseAboutToDie(),this._internalEventsEmit("dispose"),this._internalEventsClear("dispose"))}}),Object.defineProperty(S.prototype,"finalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.getChildren().forEach(function(e){e.finalizeDeath()}),this.root.identifierCache.notifyDied(this);var e=this.snapshot;this._snapshotUponDeath=e,this._internalEventsClearAll(),this.baseFinalizeDeath()}}),Object.defineProperty(S.prototype,"onSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._addSnapshotReaction(),this._internalEventsRegister("snapshot",e)}}),Object.defineProperty(S.prototype,"emitSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._internalEventsEmit("snapshot",e)}}),Object.defineProperty(S.prototype,"onPatch",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._internalEventsRegister("patch",e)}}),Object.defineProperty(S.prototype,"emitPatch",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n;this._internalEventsHasSubscribers("patch")&&(r=(n=u(function(e){if(!("oldValue"in e))throw de("Patches without `oldValue` field cannot be inversed");return[function(e){switch(e.op){case"add":return{op:"add",path:e.path,value:e.value};case"remove":return{op:"remove",path:e.path};case"replace":return{op:"replace",path:e.path,value:e.value}}}(e),function(e){switch(e.op){case"add":return{op:"remove",path:e.path};case"remove":return{op:"add",path:e.path,value:e.oldValue};case"replace":return{op:"replace",path:e.path,value:e.oldValue}}}(e)]}(function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0;n<t.length;n++){var i,a=t[n];for(i in a)e[i]=a[i]}return e}({},e,{path:t.path.substr(this.path.length)+"/"+e.path})),2))[0],n=n[1],this._internalEventsEmit("patch",r,n)),this.parent&&this.parent.emitPatch(e,t)}}),Object.defineProperty(S.prototype,"hasDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._internalEventsHas("dispose",e)}}),Object.defineProperty(S.prototype,"addDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.hasDisposer(e))throw de("cannot add a disposer when it is already registered for execution");this._internalEventsRegister("dispose",e,!0)}}),Object.defineProperty(S.prototype,"removeDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this._internalEventsHas("dispose",e))throw de("cannot remove a disposer which was never registered for execution");this._internalEventsUnregister("dispose",e)}}),Object.defineProperty(S.prototype,"removeMiddleware",{enumerable:!1,configurable:!0,writable:!0,value:function(e){!this.middlewares||0<=(e=this.middlewares.indexOf(e))&&this.middlewares.splice(e,1)}}),Object.defineProperty(S.prototype,"addMiddleWare",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;void 0===t&&(t=!0);var n={handler:e,includeHooks:t};return this.middlewares?this.middlewares.push(n):this.middlewares=[n],function(){r.removeMiddleware(n)}}}),Object.defineProperty(S.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.assertWritable({subpath:e}),this.createObservableInstanceIfNeeded(),this.type.applyPatchLocally(this,e,t)}}),Object.defineProperty(S.prototype,"_addSnapshotReaction",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=this;this._hasSnapshotReaction||(e=Object(c.y)(function(){return t.snapshot},function(e){return t.emitSnapshot(e)},j),this.addDisposer(e),this._hasSnapshotReaction=!0)}}),Object.defineProperty(S.prototype,"_internalEventsHasSubscribers",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!this._internalEvents&&this._internalEvents.hasSubscribers(e)}}),Object.defineProperty(S.prototype,"_internalEventsRegister",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return void 0===r&&(r=!1),this._internalEvents||(this._internalEvents=new Ie),this._internalEvents.register(e,t,r)}}),Object.defineProperty(S.prototype,"_internalEventsHas",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return!!this._internalEvents&&this._internalEvents.has(e,t)}}),Object.defineProperty(S.prototype,"_internalEventsUnregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._internalEvents&&this._internalEvents.unregister(e,t)}}),Object.defineProperty(S.prototype,"_internalEventsEmit",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this._internalEvents&&(t=this._internalEvents).emit.apply(t,f([e],r))}}),Object.defineProperty(S.prototype,"_internalEventsClear",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._internalEvents&&this._internalEvents.clear(e)}}),Object.defineProperty(S.prototype,"_internalEventsClearAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._internalEvents&&this._internalEvents.clearAll()}}),a([c.j],S.prototype,"createObservableInstance",null),a([c.k],S.prototype,"snapshot",null),a([c.j],S.prototype,"detach",null),a([c.j],S.prototype,"die",null),S);function S(e,t,r,n,i){n=w.call(this,e,t,r,n)||this;if(Object.defineProperty(n,"nodeId",{enumerable:!0,configurable:!0,writable:!0,value:++O}),Object.defineProperty(n,"identifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"identifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"unnormalizedIdentifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"identifierCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"isProtectionEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(n,"middlewares",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_applyPatches",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_applySnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_autoUnbox",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(n,"_isRunningAction",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"_hasSnapshotReaction",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"_observableInstanceState",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"_childNodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_initialSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_cachedInitialSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_cachedInitialSnapshotCreated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"_snapshotUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_internalEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(c.v)(n),n.unbox=n.unbox.bind(n),n._initialSnapshot=je(i),n.identifierAttribute=e.identifierAttribute,t||(n.identifierCache=new te),n._childNodes=e.initializeChildNodes(n,n._initialSnapshot),n.identifier=null,n.unnormalizedIdentifier=null,n.identifierAttribute&&n._initialSnapshot){i=n._initialSnapshot[n.identifierAttribute];if(void 0!==i||(e=n._childNodes[n.identifierAttribute])&&(i=e.value),"string"!=typeof i&&"number"!=typeof i)throw de("Instance identifier '"+n.identifierAttribute+"' for type '"+n.type.name+"' must be a string or a number");n.identifier=""+i,n.unnormalizedIdentifier=i}return(t?t.root:n).identifierCache.addNodeToCache(n),n}(mt=P=P||{})[mt.String=1]="String",mt[mt.Number=2]="Number",mt[mt.Boolean=4]="Boolean",mt[mt.Date=8]="Date",mt[mt.Literal=16]="Literal",mt[mt.Array=32]="Array",mt[mt.Map=64]="Map",mt[mt.Object=128]="Object",mt[mt.Frozen=256]="Frozen",mt[mt.Optional=512]="Optional",mt[mt.Reference=1024]="Reference",mt[mt.Identifier=2048]="Identifier",mt[mt.Late=4096]="Late",mt[mt.Refinement=8192]="Refinement",mt[mt.Union=16384]="Union",mt[mt.Null=32768]="Null",mt[mt.Undefined=65536]="Undefined",mt[mt.Integer=131072]="Integer",mt[mt.Custom=262144]="Custom",mt[mt.SnapshotProcessor=524288]="SnapshotProcessor";var A,I="cannotDetermine",C=Symbol("$type"),T=(Object.defineProperty(E.prototype,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return Q(this,e),this.instantiate(null,"",t,e).value}}),Object.defineProperty(E.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){throw de("unimplemented method")}}),Object.defineProperty(E.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e===this}}),Object.defineProperty(E.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(ue(e)){var r=o(e);return this.isAssignableFrom(r)?be:J(t,e)}return this.isValidSnapshot(e,t)}}),Object.defineProperty(E.prototype,"is",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return 0===this.validate(e,[{path:"",type:this}]).length}}),Object.defineProperty(E.prototype,"Type",{get:function(){throw de("Factory.Type should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.Type`")},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"TypeWithoutSTN",{get:function(){throw de("Factory.TypeWithoutSTN should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.TypeWithoutSTN`")},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"SnapshotType",{get:function(){throw de("Factory.SnapshotType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.SnapshotType`")},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"CreationType",{get:function(){throw de("Factory.CreationType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.CreationType`")},enumerable:!1,configurable:!0}),A=C,a([c.j],E.prototype,"create",null),E);function E(e){Object.defineProperty(this,A,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"C",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"S",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"T",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"N",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isType",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(c.v)(this),this.name=e}var V,N=(e(D,V=T),Object.defineProperty(D.prototype,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return void 0===e&&(e=this.getDefaultSnapshot()),V.prototype.create.call(this,e,t)}}),Object.defineProperty(D.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.createObservableInstanceIfNeeded(),e.storedValue}}),Object.defineProperty(D.prototype,"tryToReconcileNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return!e.isDetaching&&(e.snapshot===t||(!(!ae(t)||le(t)!==e)||!(e.type!==this||!Pe(t)||ae(t)||e.identifierAttribute&&e.identifier!==""+t[e.identifierAttribute])&&(e.applySnapshot(t),!0)))}}),Object.defineProperty(D.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(this.tryToReconcileNode(e,t))return e.setParent(r,n),e;if(e.die(),ae(t)&&this.isAssignableFrom(o(t))){e=le(t);return e.setParent(r,n),e}return this.instantiate(r,n,void 0,t)}}),Object.defineProperty(D.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),a([c.j],D.prototype,"create",null),D);function D(e){e=V.call(this,e)||this;return Object.defineProperty(e,"identifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}var x,k=(e(z,x=T),Object.defineProperty(z.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e}}),Object.defineProperty(z.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue}}),Object.defineProperty(z.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue}}),Object.defineProperty(z.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(!e.isDetaching&&e.type===this&&e.storedValue===t)return e;t=this.instantiate(r,n,void 0,t);return e.die(),t}}),Object.defineProperty(z.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),z);function z(){return null!==x&&x.apply(this,arguments)||this}function R(e){return"object"==typeof e&&e&&!0===e.isType}function H(e,t){De()}new Map;Object.defineProperty(F.prototype,"finish",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.running&&(this.running=!1,this.hooks&&this.hooks.onFinish(this.call,e))}}),Object.defineProperty(F.prototype,"incFlowsPending",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.flowsPending++}}),Object.defineProperty(F.prototype,"decFlowsPending",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.flowsPending--}}),Object.defineProperty(F.prototype,"hasFlowsPending",{get:function(){return 0<this.flowsPending},enumerable:!1,configurable:!0});function F(e,t){Object.defineProperty(this,"hooks",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"call",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"flowsPending",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"running",{enumerable:!0,configurable:!0,writable:!0,value:!0}),e&&e.onStart(t)}var M,U=1;function L(e,t){var r=le(e.context);"action"===e.type&&r.assertAlive({actionContext:e});var n=r._isRunningAction;r._isRunningAction=!0;var i=M;M=e;try{return function(e,t,i){var a=new K(e,i);if(a.isEmpty)return Object(c.j)(i).apply(null,t.args);var o=null;return function r(e){var t=a.getNextMiddleware(),n=t&&t.handler;if(!n)return Object(c.j)(i).apply(null,e.args);if(!t.includeHooks&&s[e.name])return r(e);return n(e,function(e,t){o=r(e),t&&(o=t(o))},function(e){o=e}),o}(t)}(r,e,t)}finally{M=i,r._isRunningAction=n}}function W(e){if(e)return"action"===e.type?e:e.parentActionEvent}function $(i,a,o){function e(){var e,t=U++,r=M,n=W(r);return L({type:"action",name:a,id:t,args:Te(arguments),context:i,tree:(oe(e=i,1),le(e).root.storedValue),rootId:r?r.rootId:t,parentId:r?r.id:0,allParentIds:r?f(r.allParentIds,[r.id]):[],parentEvent:r,parentActionEvent:n},o)}return e._isMSTAction=!0,e}var K=(Object.defineProperty(G.prototype,"isEmpty",{get:function(){return this.middlewares.length<=0},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"getNextMiddleware",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.middlewares[this.arrayIndex];if(e){e=e[this.inArrayIndex++];return e||(this.arrayIndex++,this.inArrayIndex=0,this.getNextMiddleware())}}}),G);function G(e,t){Object.defineProperty(this,"arrayIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"inArrayIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"middlewares",{enumerable:!0,configurable:!0,writable:!0,value:[]}),t.$mst_middleware&&this.middlewares.push(t.$mst_middleware);for(var r=e;r;)r.middlewares&&this.middlewares.push(r.middlewares),r=r.parent}function Y(e){return"function"==typeof e?"<function"+(e.name?" "+e.name:"")+">":ae(e)?"<"+e+">":"`"+function(e){try{return JSON.stringify(e)}catch(e){return"<Unserializable: "+e+">"}}(e)+"`"}function Z(e){var t=e.value,r=e.context[e.context.length-1].type,n=e.context.map(function(e){return e.path}).filter(function(e){return 0<e.length}).join("/"),i=0<n.length?'at path "/'+n+'" ':"",a=ae(t)?"value of type "+le(t).type.name+":":Oe(t)?"value":"snapshot",n=r&&ae(t)&&r.is(le(t).snapshot);return i+a+" "+Y(t)+" is not assignable "+(r?"to type: `"+r.name+"`":"")+(e.message?" ("+e.message+")":"")+(r?R(e=r)&&0<(e.flags&(P.String|P.Number|P.Integer|P.Boolean|P.Date))||Oe(t)?".":", expected an instance of `"+r.name+"` or a snapshot like `"+r.describe()+"` instead."+(n?" (Note that a snapshot of the provided value is compatible with the targeted type)":""):".")}function B(e,t,r){return e.concat([{path:t,type:r}])}function J(e,t,r){return[{context:e,value:t,message:r}]}function q(e){return e.reduce(function(e,t){return e.concat(t)},[])}function Q(e,t){void 0!==r&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})&&"true"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).ENABLE_TYPE_CHECK&&function(e,t){var r=e.validate(t,[{path:"",type:e}]);if(0<r.length)throw de(function(e,t,r){return 0!==r.length?"Error while converting "+function(e){return e.length<280?e:e.substring(0,272)+"......"+e.substring(e.length-8)}(Y(t))+" to `"+e.name+"`:\n\n    "+r.map(Z).join("\n    "):void 0}(e,t,r))}(e,t)}var X,ee=0,te=(Object.defineProperty(re.prototype,"updateLastCacheModificationPerId",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.lastCacheModificationPerId.get(e);this.lastCacheModificationPerId.set(e,void 0===t?1:t+1)}}),Object.defineProperty(re.prototype,"getLastCacheModificationPerId",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e=this.lastCacheModificationPerId.get(e)||0;return this.cacheId+"-"+e}}),Object.defineProperty(re.prototype,"addNodeToCache",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(void 0===t&&(t=!0),e.identifierAttribute){var r=e.identifier;this.cache.has(r)||this.cache.set(r,c.w.array([],he));var n=this.cache.get(r);if(-1!==n.indexOf(e))throw de("Already registered");n.push(e),t&&this.updateLastCacheModificationPerId(r)}}}),Object.defineProperty(re.prototype,"mergeCache",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;Object(c.C)(e.identifierCache.cache).forEach(function(e){return e.forEach(function(e){t.addNodeToCache(e)})})}}),Object.defineProperty(re.prototype,"notifyDied",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r;e.identifierAttribute&&(t=e.identifier,(r=this.cache.get(t))&&(r.remove(e),r.length||this.cache.delete(t),this.updateLastCacheModificationPerId(e.identifier)))}}),Object.defineProperty(re.prototype,"splitCache",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a=this,o=new re,l=e.path;return Object(c.m)(this.cache).forEach(function(e){for(var t=u(e,2),e=t[0],r=t[1],n=!1,i=r.length-1;0<=i;i--)0===r[i].path.indexOf(l)&&(o.addNodeToCache(r[i],!1),r.splice(i,1),n=!0);n&&a.updateLastCacheModificationPerId(e)}),o}}),Object.defineProperty(re.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e){e=this.cache.get(e);return!!e&&e.some(function(e){return t.isAssignableFrom(e.type)})}}),Object.defineProperty(re.prototype,"resolve",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e){var r=this.cache.get(e);if(!r)return null;var n=r.filter(function(e){return t.isAssignableFrom(e.type)});switch(n.length){case 0:return null;case 1:return n[0];default:throw de("Cannot resolve a reference to type '"+t.name+"' with id: '"+e+"' unambigously, there are multiple candidates: "+n.map(function(e){return e.path}).join(", "))}}}),re);function re(){Object.defineProperty(this,"cacheId",{enumerable:!0,configurable:!0,writable:!0,value:ee++}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:c.w.map()}),Object.defineProperty(this,"lastCacheModificationPerId",{enumerable:!0,configurable:!0,writable:!0,value:c.w.map()})}function ne(e,t,r,n,i){var a=ue(i);if(a){if(a.parent)throw de("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+(t?t.path:"")+"/"+r+"', but it lives already at '"+a.path+"'");return t&&a.setParent(t,r),a}return new _(e,t,r,n,i)}function ie(e,t,r,n,i){return new g(e,t,r,n,i)}function ae(e){return!(!e||!e.$treenode)}function oe(e,t){De()}function le(e){if(!ae(e))throw de("Value "+e+" is no MST Node");return e.$treenode}function ue(e){return e&&e.$treenode||null}function se(){return le(this).snapshot}(d=X=X||{})[d.INITIALIZING=0]="INITIALIZING",d[d.CREATED=1]="CREATED",d[d.FINALIZED=2]="FINALIZED",d[d.DETACHING=3]="DETACHING",d[d.DEAD=4]="DEAD";function ce(e,t,r){void 0===r&&(r=!0);for(var n=e,i=0;i<t.length;i++){var a=t[i];if(".."===a){if(n=n.parent)continue}else{if("."===a)continue;if(n){if(n instanceof g)try{var o=n.value;ae(o)&&(n=le(o))}catch(e){if(!r)return;throw e}if(n instanceof _){var l=n.getChildType(a);if(l&&(n=n.getChildNode(a)))continue}}}if(r)throw de("Could not resolve '"+a+"' in path '"+(Me(t.slice(0,i))||"/")+"' while resolving '"+Me(t)+"'");return}return n}function pe(r){if(!r)return be;var e=Object.keys(r);if(!e.length)return be;var n=new Array(e.length);return e.forEach(function(e,t){n[t]=r[e]}),n}var be=Object.freeze([]),fe=Object.freeze({}),he="string"==typeof c.a?{deep:!1}:{deep:!1,proxy:!1};function de(e){return void 0===e&&(e="Illegal state"),new Error("[mobx-state-tree] "+e)}function ye(e){return e}Object.freeze(he);var ve=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function ge(e){return Array.isArray(e)||Object(c.r)(e)}function me(e){return e?ge(e)?e:[e]:be}function we(e){if(null===e||"object"!=typeof e)return!1;e=Object.getPrototypeOf(e);return e===Object.prototype||null===e}function Pe(e){return!(null===e||"object"!=typeof e||e instanceof Date||e instanceof RegExp)}function Oe(e,t){return void 0===t&&(t=!0),null==e||!!("string"==typeof e||"number"==typeof e||"boolean"==typeof e||t&&e instanceof Date)}function je(e){return e}function _e(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}var Se=(Object.defineProperty(Ae.prototype,"hasSubscribers",{get:function(){return 0<this.handlers.length},enumerable:!1,configurable:!0}),Object.defineProperty(Ae.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;return void 0===t&&(t=!1),t?this.handlers.unshift(e):this.handlers.push(e),function(){r.unregister(e)}}}),Object.defineProperty(Ae.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return 0<=this.handlers.indexOf(e)}}),Object.defineProperty(Ae.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e=this.handlers.indexOf(e);0<=e&&this.handlers.splice(e,1)}}),Object.defineProperty(Ae.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.handlers.length=0}}),Object.defineProperty(Ae.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.handlers.slice().forEach(function(e){return e.apply(void 0,f(t))})}}),Ae);function Ae(){Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}var Ie=(Object.defineProperty(Ce.prototype,"hasSubscribers",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e=this.eventHandlers&&this.eventHandlers[e];return!!e&&e.hasSubscribers}}),Object.defineProperty(Ce.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return void 0===r&&(r=!1),this.eventHandlers||(this.eventHandlers={}),(this.eventHandlers[e]||(this.eventHandlers[e]=new Se)).register(t,r)}}),Object.defineProperty(Ce.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e=this.eventHandlers&&this.eventHandlers[e];return!!e&&e.has(t)}}),Object.defineProperty(Ce.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e=this.eventHandlers&&this.eventHandlers[e];e&&e.unregister(t)}}),Object.defineProperty(Ce.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.eventHandlers&&delete this.eventHandlers[e]}}),Object.defineProperty(Ce.prototype,"clearAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.eventHandlers=void 0}}),Object.defineProperty(Ce.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];e=this.eventHandlers&&this.eventHandlers[e];e&&e.emit.apply(e,f(t))}}),Ce);function Ce(){Object.defineProperty(this,"eventHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}function Te(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e[r];return t}function Ee(e,t){return 0===e.indexOf(t)}var Ve=function(e,t){};function Ne(e){console.warn(new Error("[mobx-state-tree] "+e))}function De(){0}function xe(){De()}function ke(e,t,r){void 0===r&&(r=!0),De(),r||De()}function ze(e){"function"==typeof queueMicrotask?queueMicrotask(e):"function"==typeof t?t(e):setTimeout(e,1)}function Re(e){return n=e.name,c=e,p=function(){var e=U++,t=M;if(!t)throw de("a mst flow must always have a parent context");var r=W(t);if(!r)throw de("a mst flow must always have a parent action context");var l={name:n,id:e,tree:t.tree,context:t.context,parentId:t.id,allParentIds:f(t.allParentIds,[t.id]),rootId:t.rootId,parentEvent:t,parentActionEvent:r},u=arguments;function s(e,t,r){e.$mst_middleware=p.$mst_middleware,L(b(b({},l),{type:t,args:[r]}),e)}return new Promise(function(t,r){function e(){n=c.apply(null,arguments),i(void 0)}var n;function i(e){var t;try{s(function(e){t=n.next(e)},"flow_resume",e)}catch(t){return void ze(function(){s(function(e){r(t)},"flow_throw",t)})}o(t)}function a(e){var t;try{s(function(e){t=n.throw(e)},"flow_resume_error",e)}catch(t){return void ze(function(){s(function(e){r(t)},"flow_throw",t)})}o(t)}function o(e){if(!e.done){if(!e.value||"function"!=typeof e.value.then)throw de("Only promises can be yielded to `async`, got: "+e);return e.value.then(i,a)}ze(function(){s(function(e){t(e)},"flow_return",e.value)})}e.$mst_middleware=p.$mst_middleware,L(b(b({},l),{type:"flow_spawn",args:Te(u)}),e)})};var n,c,p}function He(e){return"number"==typeof e==!0?""+e:-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Fe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Me(e){if(0===e.length)return"";function t(e){return e.map(He).join("/")}return"."===e[0]||".."===e[0]?t(e):"/"+t(e)}function Ue(e){var t=e.split("/").map(Fe);if(!(""===e||"."===e||".."===e||Ee(e,"/")||Ee(e,"./")||Ee(e,"../")))throw de("a json path must be either rooted, empty or relative, but got '"+e+"'");return""===t[0]&&t.shift(),t}Ve.ids={};var Le,We=(e($e,Le=T),Object.defineProperty($e.prototype,"flags",{get:function(){return this._subtype.flags|P.SnapshotProcessor},enumerable:!1,configurable:!0}),Object.defineProperty($e.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"snapshotProcessor("+this._subtype.describe()+")"}}),Object.defineProperty($e.prototype,"preProcessSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._processors.preProcessor?this._processors.preProcessor.call(null,e):e}}),Object.defineProperty($e.prototype,"postProcessSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._processors.postProcessor?this._processors.postProcessor.call(null,e):e}}),Object.defineProperty($e.prototype,"_fixNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;!function(e,t){for(var r,n,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];try{for(var o=p(i),l=o.next();!l.done;l=o.next()){var u=l.value;e[u]=t[u].bind(t)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}(e.type,this,"isAssignableFrom","create");var r=e.getSnapshot;e.getSnapshot=function(){return t.postProcessSnapshot(r.call(e))}}}),Object.defineProperty($e.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){n=ae(n)?n:this.preProcessSnapshot(n),n=this._subtype.instantiate(e,t,r,n);return this._fixNode(n),n}}),Object.defineProperty($e.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){n=this._subtype.reconcile(e,ae(t)?t:this.preProcessSnapshot(t),r,n);return n!==e&&this._fixNode(n),n}}),Object.defineProperty($e.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=!0);e=this._subtype.getSnapshot(e);return t?this.postProcessSnapshot(e):e}}),Object.defineProperty($e.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e=this.preProcessSnapshot(e);return this._subtype.validate(e,t)}}),Object.defineProperty($e.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),Object.defineProperty($e.prototype,"is",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=R(e)?this._subtype:ae(e)?h(e,!1):this.preProcessSnapshot(e);return 0===this._subtype.validate(t,[{path:"",type:this._subtype}]).length}}),$e);function $e(e,t,r){r=Le.call(this,r||e.name)||this;return Object.defineProperty(r,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_processors",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}var Ke,Ge="Map.put can only be used to store complex values that have an identifier type attribute";(mt=Ke=Ke||{})[mt.UNKNOWN=0]="UNKNOWN",mt[mt.YES=1]="YES",mt[mt.NO=2]="NO";var Ye,Ze=(e(Be,Ye=c.b),Object.defineProperty(Be.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Ye.prototype.get.call(this,""+e)}}),Object.defineProperty(Be.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Ye.prototype.has.call(this,""+e)}}),Object.defineProperty(Be.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Ye.prototype.delete.call(this,""+e)}}),Object.defineProperty(Be.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return Ye.prototype.set.call(this,""+e,t)}}),Object.defineProperty(Be.prototype,"put",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!e)throw de("Map.put cannot be used to set empty values");if(ae(e)){var t=le(e);if(0,null===t.identifier)throw de(Ge);return this.set(t.identifier,e),e}if(Pe(e)){var r=le(this),n=r.type;if(n.identifierMode!==Ke.YES)throw de(Ge);t=e[n.mapIdentifierAttribute];if(!fr(t)){r=this.put(n.getChildType().create(e,r.environment));return this.put(h(r))}t=""+t;return this.set(t,e),this.get(t)}throw de("Map.put can only be used to store complex values")}}),Be);function Be(e){return Ye.call(this,e,c.w.ref.enhancer)||this}var Je,qe=(e(Qe,Je=N),Object.defineProperty(Qe.prototype,"hooks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e=0<this.hookInitializers.length?this.hookInitializers.concat(e):[e];return new Qe(this.name,this._subType,e)}}),Object.defineProperty(Qe.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return this._determineIdentifierMode(),ne(this,e,t,r,n)}}),Object.defineProperty(Qe.prototype,"_determineIdentifierMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;this.identifierMode===Ke.UNKNOWN&&(e=[],function e(t,r){var n,i,a=t.getSubTypes();if(a!==I){if(a){var o=me(a);try{for(var l=p(o),u=l.next();!u.done;u=l.next())if(!e(u.value,r))return}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}return t instanceof pt&&r.push(t),1}}(this._subType,e)&&(t=void 0,e.forEach(function(e){if(e.identifierAttribute){if(t&&t!==e.identifierAttribute)throw de("The objects in a map should all have the same identifier attribute, expected '"+t+"', but child of type '"+e.name+"' declared attribute '"+e.identifierAttribute+"' as identifier");t=e.identifierAttribute}}),t?(this.identifierMode=Ke.YES,this.mapIdentifierAttribute=t):this.identifierMode=Ke.NO))}}),Object.defineProperty(Qe.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){void 0===r&&(r={});var n=t.type._subType,i={};return Object.keys(r).forEach(function(e){i[e]=n.instantiate(t,e,void 0,r[e])}),i}}),Object.defineProperty(Qe.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new Ze(e)}}),Object.defineProperty(Qe.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e,n){Object(c.i)(n,e.unbox),e.type.hookInitializers.forEach(function(e){var r=e(n);Object.keys(r).forEach(function(e){var t=r[e],t=$(n,e,t);_e(n,e,t)})}),Object(c.p)(n,this.willChange),Object(c.x)(n,this.didChange)}}),Object.defineProperty(Qe.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"Map<string, "+this._subType.describe()+">"}}),Object.defineProperty(Qe.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Object(c.C)(e.storedValue)}}),Object.defineProperty(Qe.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e=e.storedValue.get(""+t);if(!e)throw de("Not a child "+t);return e}}),Object.defineProperty(Qe.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=le(e.object),r=e.name;t.assertWritable({subpath:r});var n=t.type,i=n._subType;switch(e.type){case"update":var a=e.newValue;if(a===e.object.get(r))return null;Q(i,a),e.newValue=i.reconcile(t.getChildNode(r),e.newValue,t,r),n.processIdentifier(r,e.newValue);break;case"add":Q(i,e.newValue),e.newValue=i.instantiate(t,r,void 0,e.newValue),n.processIdentifier(r,e.newValue)}return e}}),Object.defineProperty(Qe.prototype,"processIdentifier",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this.identifierMode===Ke.YES&&t instanceof _){t=t.identifier;if(t!==e)throw de("A map of objects containing an identifier should always store the object under their own identifier. Trying to store key '"+t+"', but expected: '"+e+"'")}}}),Object.defineProperty(Qe.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={};return e.getChildren().forEach(function(e){t[e.subpath]=e.snapshot}),t}}),Object.defineProperty(Qe.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r={};return Object.keys(t).forEach(function(e){r[e]=t[e].getSnapshot()}),r}}),Object.defineProperty(Qe.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=le(e.object);switch(e.type){case"update":return void t.emitPatch({op:"replace",path:He(e.name),value:e.newValue.snapshot,oldValue:e.oldValue?e.oldValue.snapshot:void 0},t);case"add":return void t.emitPatch({op:"add",path:He(e.name),value:e.newValue.snapshot,oldValue:void 0},t);case"delete":var r=e.oldValue.snapshot;return e.oldValue.die(),void t.emitPatch({op:"remove",path:He(e.name),oldValue:r},t)}}}),Object.defineProperty(Qe.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.storedValue;switch(r.op){case"add":case"replace":n.set(t,r.value);break;case"remove":n.delete(t)}}}),Object.defineProperty(Qe.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){Q(this,t);var r=e.storedValue,n={};if(Array.from(r.keys()).forEach(function(e){n[e]=!1}),t)for(var i in t)r.set(i,t[i]),n[""+i]=!0;Object.keys(n).forEach(function(e){!1===n[e]&&r.delete(e)})}}),Object.defineProperty(Qe.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType}}),Object.defineProperty(Qe.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var n=this;return we(t)?q(Object.keys(t).map(function(e){return n._subType.validate(t[e],B(r,e,n._subType))})):J(r,t,"Value is not a plain object")}}),Object.defineProperty(Qe.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return fe}}),Object.defineProperty(Qe.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.storedValue.delete(t)}}),a([c.j],Qe.prototype,"applySnapshot",null),Qe);function Qe(e,t,r){void 0===r&&(r=[]);e=Je.call(this,e)||this;return Object.defineProperty(e,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(e,"identifierMode",{enumerable:!0,configurable:!0,writable:!0,value:Ke.UNKNOWN}),Object.defineProperty(e,"mapIdentifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Map}),Object.defineProperty(e,"hookInitializers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e._determineIdentifierMode(),e.hookInitializers=r,Object(c.v)(e),e}var Xe,et=(e(tt,Xe=N),Object.defineProperty(tt.prototype,"hooks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e=0<this.hookInitializers.length?this.hookInitializers.concat(e):[e];return new tt(this.name,this._subType,e)}}),Object.defineProperty(tt.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return ne(this,e,t,r,n)}}),Object.defineProperty(tt.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(r,e){void 0===e&&(e=[]);var n=r.type._subType,i={};return e.forEach(function(e,t){t=""+t;i[t]=n.instantiate(r,t,void 0,e)}),i}}),Object.defineProperty(tt.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return c.w.array(pe(e),he)}}),Object.defineProperty(tt.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e,n){Object(c.h)(n).dehancer=e.unbox,e.type.hookInitializers.forEach(function(e){var r=e(n);Object.keys(r).forEach(function(e){var t=r[e],t=$(n,e,t);_e(n,e,t)})}),Object(c.p)(n,this.willChange),Object(c.x)(n,this.didChange)}}),Object.defineProperty(tt.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType.describe()+"[]"}}),Object.defineProperty(tt.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue.slice()}}),Object.defineProperty(tt.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=Number(t);if(r<e.storedValue.length)return e.storedValue[r];throw de("Not a child: "+t)}}),Object.defineProperty(tt.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=le(e.object);t.assertWritable({subpath:""+e.index});var r=t.type._subType,n=t.getChildren();switch(e.type){case"update":if(e.newValue===e.object[e.index])return null;var i=rt(t,r,[n[e.index]],[e.newValue],[e.index]);if(!i)return null;e.newValue=i[0];break;case"splice":var a=e.index,o=e.removedCount,l=e.added,i=rt(t,r,n.slice(a,a+o),l,l.map(function(e,t){return a+t}));if(!i)return null;e.added=i;for(var u=a+o;u<n.length;u++)n[u].setParent(t,""+(u+l.length-o))}return e}}),Object.defineProperty(tt.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.getChildren().map(function(e){return e.snapshot})}}),Object.defineProperty(tt.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=[];return Object.keys(t).forEach(function(e){r.push(t[e].getSnapshot())}),r}}),Object.defineProperty(tt.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=le(e.object);switch(e.type){case"update":return void t.emitPatch({op:"replace",path:""+e.index,value:e.newValue.snapshot,oldValue:e.oldValue?e.oldValue.snapshot:void 0},t);case"splice":for(var r=e.removedCount-1;0<=r;r--)t.emitPatch({op:"remove",path:""+(e.index+r),oldValue:e.removed[r].snapshot},t);for(r=0;r<e.addedCount;r++)t.emitPatch({op:"add",path:""+(e.index+r),value:t.getChildNode(""+(e.index+r)).snapshot,oldValue:void 0},t);return}}}),Object.defineProperty(tt.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.storedValue,i="-"===t?n.length:Number(t);switch(r.op){case"replace":n[i]=r.value;break;case"add":n.splice(i,0,r.value);break;case"remove":n.splice(i,1)}}}),Object.defineProperty(tt.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){Q(this,t),e.storedValue.replace(t)}}),Object.defineProperty(tt.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType}}),Object.defineProperty(tt.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r){var n=this;return ge(e)?q(e.map(function(e,t){return n._subType.validate(e,B(r,""+t,n._subType))})):J(r,e,"Value is not an array")}}),Object.defineProperty(tt.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return be}}),Object.defineProperty(tt.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.storedValue.splice(Number(t),1)}}),a([c.j],tt.prototype,"applySnapshot",null),tt);function tt(e,t,r){void 0===r&&(r=[]);e=Xe.call(this,e)||this;return Object.defineProperty(e,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(e,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Array}),Object.defineProperty(e,"hookInitializers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object(c.v)(e),e.hookInitializers=r,e}function rt(e,t,r,n,i){for(var a,o=!0,l=0;;l++){var u=l<=n.length-1,s=r[l],c=u?n[l]:void 0,p=""+i[l];if(((a=c)instanceof g||a instanceof _)&&(c=c.storedValue),!s&&!u)break;if(u)if(s)if(it(s,c))r[l]=nt(t,e,p,c,s);else{for(var b=void 0,f=l;f<r.length;f++)if(it(r[f],c)){b=r.splice(f,1)[0];break}o=!1;h=nt(t,e,p,c,b);r.splice(l,0,h)}else{if(ae(c)&&le(c).parent===e)throw de("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+e.path+"/"+p+"', but it lives already at '"+le(c).path+"'");o=!1;var h=nt(t,e,p,c);r.splice(l,0,h)}else o=!1,r.splice(l,1),s instanceof _&&s.createObservableInstanceIfNeeded(),s.die(),l--}return o?null:r}function nt(t,r,n,i,a){Q(t,i);var e=function(){if(ae(i)){var e=le(i);if(e.assertAlive(fe),null!==e.parent&&e.parent===r)return e.setParent(r,n),e}return a?t.reconcile(a,i,r,n):t.instantiate(r,n,void 0,i)}();return a&&a!==e&&(a instanceof _&&a.createObservableInstanceIfNeeded(),a.die()),e}function it(e,t){if(e.isAlive){if(ae(t)){var r=le(t);return r.isAlive&&r===e}return e.snapshot===t||e instanceof _&&null!==e.identifier&&e.identifierAttribute&&we(t)&&e.identifier===""+t[e.identifierAttribute]&&e.type.is(t)}}var at="preProcessSnapshot",ot="postProcessSnapshot";function lt(){return le(this).toString()}var ut={name:"AnonymousModel",properties:{},initializers:be};function st(e){return Object.keys(e).reduce(function(e,t){var r;if(t in s)throw de("Hook '"+t+"' was defined as property. Hooks should be defined as part of the actions");var n=Object.getOwnPropertyDescriptor(e,t);if("get"in n)throw de("Getters are not supported as properties. Please use views instead");var i=n.value;if(null==i)throw de("The default value of an attribute cannot be null or undefined as the type cannot be inferred. Did you mean `types.maybe(someType)`?");if(Oe(i))return Object.assign({},e,((n={})[t]=kt(function(e){switch(typeof e){case"string":return yt;case"number":return vt;case"boolean":return gt;case"object":if(e instanceof Date)return wt}throw de("Cannot determine primitive type from value "+e)}(i),i),n));if(i instanceof qe)return Object.assign({},e,((r={})[t]=kt(i,{}),r));if(i instanceof et)return Object.assign({},e,((r={})[t]=kt(i,[]),r));if(R(i))return e;throw de("Invalid type definition for property '"+t+"', cannot infer a type from a value like '"+i+"' ("+typeof i+")")},e)}var ct,pt=(e(bt,ct=N),Object.defineProperty(bt.prototype,"_getIdentifierAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(){var r=void 0;return this.forAllProps(function(e,t){if(t.flags&P.Identifier){if(r)throw de("Cannot define property '"+e+"' as object identifier, property '"+r+"' is already defined as identifier property");r=e}}),r}}),Object.defineProperty(bt.prototype,"cloneAndEnhance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new bt({name:e.name||this.name,properties:Object.assign({},this.properties,e.properties),initializers:this.initializers.concat(e.initializers||[]),preProcessor:e.preProcessor||this.preProcessor,postProcessor:e.postProcessor||this.postProcessor})}}),Object.defineProperty(bt.prototype,"actions",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this;return this.cloneAndEnhance({initializers:[function(e){return r.instantiateActions(e,t(e)),e}]})}}),Object.defineProperty(bt.prototype,"instantiateActions",{enumerable:!1,configurable:!0,writable:!0,value:function(a,o){if(!we(o))throw de("actions initializer should return a plain object containing actions");Object.keys(o).forEach(function(e){if(e===at)throw de("Cannot define action '"+at+"', it should be defined using 'type.preProcessSnapshot(fn)' instead");if(e===ot)throw de("Cannot define action '"+ot+"', it should be defined using 'type.postProcessSnapshot(fn)' instead");var t,r=o[e],n=a[e];e in s&&n&&(t=r,r=function(){n.apply(null,arguments),t.apply(null,arguments)});var i=r.$mst_middleware,r=r.bind(o);r.$mst_middleware=i;r=$(a,e,r);o[e]=r,_e(a,e,r)})}}),Object.defineProperty(bt.prototype,"volatile",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this;if("function"!=typeof t)throw de("You passed an "+typeof t+" to volatile state as an argument, when function is expected");return this.cloneAndEnhance({initializers:[function(e){return r.instantiateVolatileState(e,t(e)),e}]})}}),Object.defineProperty(bt.prototype,"instantiateVolatileState",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!we(t))throw de("volatile state initializer should return a plain object containing state");Object(c.A)(e,t)}}),Object.defineProperty(bt.prototype,"extend",{enumerable:!1,configurable:!0,writable:!0,value:function(o){var l=this;return this.cloneAndEnhance({initializers:[function(e){var t,r=o(e),n=r.actions,i=r.views,a=r.state;for(t in function(e,t){var r={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}(r,["actions","views","state"]))throw de("The `extend` function should return an object with a subset of the fields 'actions', 'views' and 'state'. Found invalid key '"+t+"'");return a&&l.instantiateVolatileState(e,a),i&&l.instantiateViews(e,i),n&&l.instantiateActions(e,n),e}]})}}),Object.defineProperty(bt.prototype,"views",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this;return this.cloneAndEnhance({initializers:[function(e){return r.instantiateViews(e,t(e)),e}]})}}),Object.defineProperty(bt.prototype,"instantiateViews",{enumerable:!1,configurable:!0,writable:!0,value:function(n,i){if(!we(i))throw de("views initializer should return a plain object containing views");Object.keys(i).forEach(function(e){var t,r=Object.getOwnPropertyDescriptor(i,e);if("get"in r)Object(c.q)(n,e)?((t=Object(c.h)(n,e)).derivation=r.get,t.scope=n,r.set&&(t.setter=Object(c.j)(t.name+"-setter",r.set))):(Object.defineProperty(n,e,r),Object(c.v)(n,((t={})[e]=c.k,t)));else{if("function"!=typeof r.value)throw de("A view member should either be a function or getter based property");_e(n,e,r.value)}})}}),Object.defineProperty(bt.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var i=ae(n)?n:this.applySnapshotPreProcessor(n);return ne(this,e,t,r,i)}}),Object.defineProperty(bt.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(r,n){void 0===n&&(n={});var e=r.type,i={};return e.forAllProps(function(e,t){i[e]=t.instantiate(r,e,void 0,n[e])}),i}}),Object.defineProperty(bt.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return c.w.object(e,fe,he)}}),Object.defineProperty(bt.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){_e(r,"toString",lt),this.forAllProps(function(e){Object(c.i)(r,e,t.unbox)}),this.initializers.reduce(function(e,t){return t(e)},r),Object(c.p)(r,this.willChange),Object(c.x)(r,this.didChange)}}),Object.defineProperty(bt.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e,r=le(t.object),n=t.name;r.assertWritable({subpath:n});e=r.type.properties[n];return e&&(Q(e,t.newValue),t.newValue=e.reconcile(r.getChildNode(n),t.newValue,r,n)),t}}),Object.defineProperty(bt.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e,r=le(t.object);r.type.properties[t.name]&&(e=t.oldValue?t.oldValue.snapshot:void 0,r.emitPatch({op:"replace",path:He(t.name),value:t.newValue.snapshot,oldValue:e},r))}}),Object.defineProperty(bt.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this,n=[];return this.forAllProps(function(e){n.push(r.getChildNode(t,e))}),n}}),Object.defineProperty(bt.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!(t in this.properties))throw de("Not a value property: "+t);e=Object(c.h)(e.storedValue,t).raw();if(!e)throw de("Node not available for property "+t);return e}}),Object.defineProperty(bt.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(r,e){var n=this;void 0===e&&(e=!0);var i={};return this.forAllProps(function(e,t){Object(c.n)(r.storedValue,e).reportObserved(),i[e]=n.getChildNode(r,e).snapshot}),e?this.applySnapshotPostProcessor(i):i}}),Object.defineProperty(bt.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r={};return Object.keys(t).forEach(function(e){r[e]=t[e].getSnapshot()}),this.applySnapshotPostProcessor(r)}}),Object.defineProperty(bt.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){if("replace"!==r.op&&"add"!==r.op)throw de("object does not support operation "+r.op);e.storedValue[t]=r.value}}),Object.defineProperty(bt.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e){var r=this.applySnapshotPreProcessor(e);Q(this,r),this.forAllProps(function(e){t.storedValue[e]=r[e]})}}),Object.defineProperty(bt.prototype,"applySnapshotPreProcessor",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.preProcessor;return t?t.call(null,e):e}}),Object.defineProperty(bt.prototype,"applySnapshotPostProcessor",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.postProcessor;return t?t.call(null,e):e}}),Object.defineProperty(bt.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return ke(),this.properties[e]}}),Object.defineProperty(bt.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this,n=this.applySnapshotPreProcessor(e);return we(n)?q(this.propertyNames.map(function(e){return r.properties[e].validate(n[e],B(t,e,r.properties[e]))})):J(t,n,"Value is not a plain object")}}),Object.defineProperty(bt.prototype,"forAllProps",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this;this.propertyNames.forEach(function(e){return t(e,r.properties[e])})}}),Object.defineProperty(bt.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;return"{ "+this.propertyNames.map(function(e){return e+": "+t.properties[e].describe()}).join("; ")+" }"}}),Object.defineProperty(bt.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return fe}}),Object.defineProperty(bt.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.storedValue[t]=void 0}}),a([c.j],bt.prototype,"applySnapshot",null),bt);function bt(e){var n=ct.call(this,e.name||ut.name)||this;return Object.defineProperty(n,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Object}),Object.defineProperty(n,"initializers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"properties",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"preProcessor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"postProcessor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"propertyNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"named",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return n.cloneAndEnhance({name:e})}}),Object.defineProperty(n,"props",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return n.cloneAndEnhance({properties:e})}}),Object.defineProperty(n,"preProcessSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var r=n.preProcessor;return r?n.cloneAndEnhance({preProcessor:function(e){return r(t(e))}}):n.cloneAndEnhance({preProcessor:t})}}),Object.defineProperty(n,"postProcessSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var r=n.postProcessor;return r?n.cloneAndEnhance({postProcessor:function(e){return t(r(e))}}):n.cloneAndEnhance({postProcessor:t})}}),Object(c.v)(n),Object.assign(n,ut,e),n.properties=st(n.properties),je(n.properties),n.propertyNames=Object.keys(n.properties),n.identifierAttribute=n._getIdentifierAttribute(),n}function ft(e){return R(e)&&0<(e.flags&P.Object)}var ht,C=(e(dt,ht=k),Object.defineProperty(dt.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(dt.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return ie(this,e,t,r,n)}}),Object.defineProperty(dt.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.initializer(e)}}),Object.defineProperty(dt.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return Oe(e)&&this.checker(e)?be:J(t,e,"Value is not a "+("Date"===this.name?"Date or a unix milliseconds timestamp":this.name))}}),dt);function dt(e,t,r,n){void 0===n&&(n=ye);e=ht.call(this,e)||this;return Object.defineProperty(e,"flags",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(e,"checker",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(e,"initializer",{enumerable:!0,configurable:!0,writable:!0,value:n}),e.flags=t,e}var yt=new C("string",P.String,function(e){return"string"==typeof e}),vt=new C("number",P.Number,function(e){return"number"==typeof e}),d=new C("integer",P.Integer,function(e){return ve(e)}),gt=new C("boolean",P.Boolean,function(e){return"boolean"==typeof e}),mt=new C("null",P.Null,function(e){return null===e}),N=new C("undefined",P.Undefined,function(e){return void 0===e}),C=new C("Date",P.Date,function(e){return"number"==typeof e||e instanceof Date},function(e){return e instanceof Date?e:new Date(e)});C.getSnapshot=function(e){return e.storedValue.getTime()};var wt=C;var Pt,Ot=(e(jt,Pt=k),Object.defineProperty(jt.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return ie(this,e,t,r,n)}}),Object.defineProperty(jt.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return JSON.stringify(this.value)}}),Object.defineProperty(jt.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return Oe(e)&&e===this.value?be:J(t,e,"Value is not a literal "+JSON.stringify(this.value))}}),jt);function jt(e){var t=Pt.call(this,JSON.stringify(e))||this;return Object.defineProperty(t,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Literal}),t.value=e,t}function _t(e){return De(),new Ot(e)}var St,At=(e(It,St=T),Object.defineProperty(It.prototype,"flags",{get:function(){return this._subtype.flags|P.Refinement},enumerable:!1,configurable:!0}),Object.defineProperty(It.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(It.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return this._subtype.instantiate(e,t,r,n)}}),Object.defineProperty(It.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._subtype.isAssignableFrom(e)}}),Object.defineProperty(It.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this._subtype.validate(e,t);if(0<r.length)return r;r=ae(e)?le(e).snapshot:e;return this._predicate(r)?be:J(t,e,this._message(e))}}),Object.defineProperty(It.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return this._subtype.reconcile(e,t,r,n)}}),Object.defineProperty(It.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),It);function It(e,t,r,n){e=St.call(this,e)||this;return Object.defineProperty(e,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(e,"_predicate",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(e,"_message",{enumerable:!0,configurable:!0,writable:!0,value:n}),e}var Ct,Tt=(e(Et,Ct=T),Object.defineProperty(Et.prototype,"flags",{get:function(){var t=P.Union;return this._types.forEach(function(e){t|=e.flags}),t},enumerable:!1,configurable:!0}),Object.defineProperty(Et.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this._types.some(function(e){return e.isAssignableFrom(t)})}}),Object.defineProperty(Et.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"("+this._types.map(function(e){return e.describe()}).join(" | ")+")"}}),Object.defineProperty(Et.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var i=this.determineType(n,void 0);if(!i)throw de("No matching type for union "+this.describe());return i.instantiate(e,t,r,n)}}),Object.defineProperty(Et.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var i=this.determineType(t,e.type);if(!i)throw de("No matching type for union "+this.describe());return i.reconcile(e,t,r,n)}}),Object.defineProperty(Et.prototype,"determineType",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return this._dispatcher?this._dispatcher(t):r?r.is(t)?r:this._types.filter(function(e){return e!==r}).find(function(e){return e.is(t)}):this._types.find(function(e){return e.is(t)})}}),Object.defineProperty(Et.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this._dispatcher)return this._dispatcher(e).validate(e,t);for(var r=[],n=0,i=0;i<this._types.length;i++){var a=this._types[i].validate(e,t);if(0===a.length){if(this._eager)return be;n++}else r.push(a)}return 1===n?be:J(t,e,"No type is applicable for the union").concat(q(r))}}),Object.defineProperty(Et.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._types}}),Et);function Et(e,t,r){e=Ct.call(this,e)||this;return Object.defineProperty(e,"_types",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(e,"_dispatcher",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_eager",{enumerable:!0,configurable:!0,writable:!0,value:!0}),r=b({eager:!0,dispatcher:void 0},r),e._dispatcher=r.dispatcher,r.eager||(e._eager=!1),e}function Vt(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=R(e)?void 0:e,i=R(e)?f([e],t):t,e="("+i.map(function(e){return e.name}).join(" | ")+")";return new Tt(e,i,n)}var Nt,Dt=(e(xt,Nt=T),Object.defineProperty(xt.prototype,"flags",{get:function(){return this._subtype.flags|P.Optional},enumerable:!1,configurable:!0}),Object.defineProperty(xt.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype.describe()+"?"}}),Object.defineProperty(xt.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(0<=this.optionalValues.indexOf(n)){var i=this.getDefaultInstanceOrSnapshot();return this._subtype.instantiate(e,t,r,i)}return this._subtype.instantiate(e,t,r,n)}}),Object.defineProperty(xt.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return this._subtype.reconcile(e,this.optionalValues.indexOf(t)<0&&this._subtype.is(t)?t:this.getDefaultInstanceOrSnapshot(),r,n)}}),Object.defineProperty(xt.prototype,"getDefaultInstanceOrSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e="function"==typeof this._defaultValue?this._defaultValue():this._defaultValue;return"function"==typeof this._defaultValue&&Q(this,e),e}}),Object.defineProperty(xt.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return 0<=this.optionalValues.indexOf(e)?be:this._subtype.validate(e,t)}}),Object.defineProperty(xt.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._subtype.isAssignableFrom(e)}}),Object.defineProperty(xt.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),xt);function xt(e,t,r){var n=Nt.call(this,e.name)||this;return Object.defineProperty(n,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_defaultValue",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(n,"optionalValues",{enumerable:!0,configurable:!0,writable:!0,value:r}),n}function kt(e,t,r){return function(e,t){if("function"!=typeof t&&ae(t))throw de("default value cannot be an instance, pass a snapshot or a function that creates an instance/snapshot instead");H(e,1)}(e,t),new Dt(e,t,r||zt)}var zt=[void 0];var Rt=kt(N,void 0),Ht=kt(mt,null);function Ft(e){return H(e,1),Vt(e,Rt)}var Mt,Ut=(e(Lt,Mt=T),Object.defineProperty(Lt.prototype,"flags",{get:function(){return(this._subType?this._subType.flags:0)|P.Late},enumerable:!1,configurable:!0}),Object.defineProperty(Lt.prototype,"getSubType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this._subType){var t=void 0;try{t=this._definition()}catch(e){if(!(e instanceof ReferenceError))throw e;t=void 0}if(e&&void 0===t)throw de("Late type seems to be used too early, the definition (still) returns undefined");t&&(this._subType=t)}return this._subType}}),Object.defineProperty(Lt.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return this.getSubType(!0).instantiate(e,t,r,n)}}),Object.defineProperty(Lt.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return this.getSubType(!0).reconcile(e,t,r,n)}}),Object.defineProperty(Lt.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getSubType(!1);return e?e.name:"<uknown late type>"}}),Object.defineProperty(Lt.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.getSubType(!1);return r?r.validate(e,t):be}}),Object.defineProperty(Lt.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.getSubType(!1);return!!t&&t.isAssignableFrom(e)}}),Object.defineProperty(Lt.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getSubType(!1);return e||I}}),Lt);function Lt(e,t){e=Mt.call(this,e)||this;return Object.defineProperty(e,"_definition",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(e,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}var Wt,$t=(e(Kt,Wt=k),Object.defineProperty(Kt.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"<any immutable value>"}}),Object.defineProperty(Kt.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return ie(this,e,t,r,n)}}),Object.defineProperty(Kt.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return"function"==typeof e?J(t,e,"Value is not serializable and cannot be frozen"):this.subType?this.subType.validate(e,t):be}}),Kt);function Kt(e){var t=Wt.call(this,e?"frozen("+e.name+")":"frozen")||this;return Object.defineProperty(t,"subType",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(t,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Frozen}),t}var Gt=new $t;var Yt=(Object.defineProperty(Zt.prototype,"updateResolvedReference",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=""+this.identifier,r=e.root,n=r.identifierCache.getLastCacheModificationPerId(t);if(!this.resolvedReference||this.resolvedReference.lastCacheModification!==n){var i=this.targetType,t=r.identifierCache.resolve(i,t);if(!t)throw new Jt("[mobx-state-tree] Failed to resolve reference '"+this.identifier+"' to type '"+this.targetType.name+"' (from node: "+e.path+")");this.resolvedReference={node:t,lastCacheModification:n}}}}),Object.defineProperty(Zt.prototype,"resolvedValue",{get:function(){return this.updateResolvedReference(this.node),this.resolvedReference.node.value},enumerable:!1,configurable:!0}),Zt);function Zt(e,t){if(Object.defineProperty(this,"targetType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"identifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolvedReference",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),fr(e))this.identifier=e;else{if(!ae(e))throw de("Can only store references to tree nodes or identifiers, got: '"+e+"'");e=le(e);if(!e.identifierAttribute)throw de("Can only store references with a defined identifier attribute.");e=e.unnormalizedIdentifier;if(null==e)throw de("Can only store references to tree nodes with a defined identifier.");this.identifier=e}}var Bt,Jt=(e(qt,Bt=Error),qt);function qt(e){e=Bt.call(this,e)||this;return Object.setPrototypeOf(e,qt.prototype),e}var Qt,C=(e(Xt,Qt=k),Object.defineProperty(Xt.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(Xt.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.targetType.isAssignableFrom(e)}}),Object.defineProperty(Xt.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return fr(e)?be:J(t,e,"Value is not a valid identifier, which is a string or a number")}}),Object.defineProperty(Xt.prototype,"fireInvalidated",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var i,a=t.parent;a&&a.isAlive&&((i=a.storedValue)&&this.onInvalidated({cause:e,parent:i,invalidTarget:n?n.storedValue:void 0,invalidId:r,replaceRef:function(e){l(t.root.storedValue,{op:"replace",value:e,path:t.path})},removeRef:function(){ft(a.type)?this.replaceRef(void 0):l(t.root.storedValue,{op:"remove",path:t.path})}}))}}),Object.defineProperty(Xt.prototype,"addTargetNodeWatcher",{enumerable:!1,configurable:!0,writable:!0,value:function(r,n){var i=this,e=this.getValue(r);if(e){var a=le(e),e=function(e,t){t=function(e){switch(e){case s.beforeDestroy:return"destroy";case s.beforeDetach:return"detach";default:return}}(t);t&&i.fireInvalidated(t,r,n,a)},t=a.registerHook(s.beforeDetach,e),o=a.registerHook(s.beforeDestroy,e);return function(){t(),o()}}}}),Object.defineProperty(Xt.prototype,"watchTargetNodeForInvalidations",{enumerable:!1,configurable:!0,writable:!0,value:function(n,i,a){var o,e,l=this;this.onInvalidated&&(n.registerHook(s.beforeDestroy,function(){o&&o()}),e=function(e){o&&o();var t=n.parent,r=t&&t.storedValue;t&&t.isAlive&&r&&((a?!!a.get(i,r):n.root.identifierCache.has(l.targetType,""+i))?o=l.addTargetNodeWatcher(n,i):e||l.fireInvalidated("invalidSnapshotReference",n,i,null))},n.state===X.FINALIZED?e(!0):(n.isRoot||n.root.registerHook(s.afterCreationFinalization,function(){n.parent&&n.parent.createObservableInstanceIfNeeded()}),n.registerHook(s.afterAttach,function(){e(!1)})))}}),Xt);function Xt(e,t){var r=Qt.call(this,"reference("+e.name+")")||this;return Object.defineProperty(r,"targetType",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"onInvalidated",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(r,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Reference}),r}var er,tr=(e(rr,er=C),Object.defineProperty(rr.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e.isAlive)return e.storedValue.resolvedValue}}),Object.defineProperty(rr.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue.identifier}}),Object.defineProperty(rr.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var i,i=ae(n)?(oe(i=n,1),le(i).identifier):n,n=new Yt(n,this.targetType),r=ie(this,e,t,r,n);return n.node=r,this.watchTargetNodeForInvalidations(r,i,void 0),r}}),Object.defineProperty(rr.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(!e.isDetaching&&e.type===this){var i=ae(t),a=e.storedValue;if(!i&&a.identifier===t||i&&a.resolvedValue===t)return e.setParent(r,n),e}t=this.instantiate(r,n,void 0,t);return e.die(),t}}),rr);function rr(e,t){return er.call(this,e,t)||this}var nr,ir=(e(ar,nr=C),Object.defineProperty(ar.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e.isAlive)return this.options.get(e.storedValue,e.parent?e.parent.storedValue:null)}}),Object.defineProperty(ar.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue}}),Object.defineProperty(ar.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){n=ae(n)?this.options.set(n,e?e.storedValue:null):n,r=ie(this,e,t,r,n);return this.watchTargetNodeForInvalidations(r,n,this.options),r}}),Object.defineProperty(ar.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){t=ae(t)?this.options.set(t,e?e.storedValue:null):t;if(!e.isDetaching&&e.type===this&&e.storedValue===t)return e.setParent(r,n),e;t=this.instantiate(r,n,void 0,t);return e.die(),t}}),ar);function ar(e,t,r){r=nr.call(this,e,r)||this;return Object.defineProperty(r,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}function or(e,t){H(e,1);var r=t||void 0,t=t?t.onInvalidated:void 0;return r&&(r.get||r.set)?new ir(e,{get:r.get,set:r.set},t):new tr(e,t)}var lr,T=(e(ur,lr=k),Object.defineProperty(ur.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(!(e&&e.type instanceof pt))throw de("Identifier types can only be instantiated as direct child of a model type");return ie(this,e,t,r,n)}}),Object.defineProperty(ur.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(e.storedValue!==t)throw de("Tried to change identifier from '"+e.storedValue+"' to '"+t+"'. Changing identifiers is not allowed.");return e.setParent(r,n),e}}),Object.defineProperty(ur.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return typeof e!==this.validType?J(t,e,"Value is not a valid "+this.describe()+", expected a "+this.validType):be}}),ur);function ur(e,t){e=lr.call(this,e)||this;return Object.defineProperty(e,"validType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(e,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Identifier}),e}var sr,C=(e(cr,sr=T),Object.defineProperty(cr.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"identifier"}}),cr);function cr(){var e=sr.call(this,"identifier","string")||this;return Object.defineProperty(e,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Identifier}),e}var pr,T=(e(br,pr=T),Object.defineProperty(br.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue}}),Object.defineProperty(br.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"identifierNumber"}}),br);function br(){return pr.call(this,"identifierNumber","number")||this}C=new C,T=new T;function fr(e){return"string"==typeof e||"number"==typeof e}var hr,dr=(e(yr,hr=k),Object.defineProperty(yr.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(yr.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this.options.isTargetType(e))return be;var r=this.options.getValidationMessage(e);return r?J(t,e,"Invalid value for type '"+this.name+"': "+r):be}}),Object.defineProperty(yr.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.options.toSnapshot(e.storedValue)}}),Object.defineProperty(yr.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){n=this.options.isTargetType(n)?n:this.options.fromSnapshot(n,e&&e.root.environment);return ie(this,e,t,r,n)}}),Object.defineProperty(yr.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var i=!this.options.isTargetType(t);if(!e.isDetaching&&(e.type===this&&(i?t===e.snapshot:t===e.storedValue)))return e.setParent(r,n),e;t=i?this.options.fromSnapshot(t,r.root.environment):t,t=this.instantiate(r,n,void 0,t);return e.die(),t}}),yr);function yr(e){var t=hr.call(this,e.name)||this;return Object.defineProperty(t,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(t,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Custom}),t}var vr={enumeration:function(e,t){return t=Vt.apply(void 0,f((t="string"==typeof e?t:e).map(function(e){return _t(""+e)}))),"string"==typeof e&&(t.name=e),t},model:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r="string"==typeof e[0]?e.shift():"AnonymousModel",n=e.shift()||{};return new pt({name:r,properties:n})},compose:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r="string"==typeof e[0],n=r?e[0]:"AnonymousModel";return r&&e.shift(),e.reduce(function(t,r){return t.cloneAndEnhance({name:t.name+"_"+r.name,properties:r.properties,initializers:r.initializers,preProcessor:function(e){return r.applySnapshotPreProcessor(t.applySnapshotPreProcessor(e))},postProcessor:function(e){return r.applySnapshotPostProcessor(t.applySnapshotPostProcessor(e))}})}).named(n)},custom:function(e){return new dr(e)},reference:or,safeReference:function(e,t){return e=or(e,b(b({},t),{onInvalidated:function(e){e.removeRef()}})),t&&!1===t.acceptsUndefined?e:Ft(e)},union:Vt,optional:kt,literal:_t,maybe:Ft,maybeNull:function(e){return H(e,1),Vt(e,Ht)},refinement:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r="string"==typeof e[0]?e.shift():R(e[0])?e[0].name:null,n=e[0],i=e[1],a=e[2]||function(e){return"Value does not respect the refinement predicate"};return H(n,[1,2]),ke(),xe(),xe(),new At(r,n,i,a)},string:yt,boolean:gt,number:vt,integer:d,Date:wt,map:function(e){return new qe("map<string, "+e.name+">",e)},array:function(e){return H(e,1),new et(e.name+"[]",e)},frozen:function(e){return 0===arguments.length?Gt:R(e)?new $t(e):kt(Gt,e)},identifier:C,identifierNumber:T,late:function(e,t){var r="string"==typeof e?e:"late("+e.toString()+")";return new Ut(r,e="string"==typeof e?t:e)},undefined:N,null:mt,snapshotProcessor:function(e,t,r){return H(e,1),new We(e,t,r)}}}).call(this,mr(130),mr(367).setImmediate)}}]);